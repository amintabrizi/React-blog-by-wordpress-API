{"version":3,"sources":["axios/axios.js","Components/PostsComponent.js"],"names":["blogAPI","axios","create","baseURL","interceptors","request","use","config","err","Promise","reject","response","PostsComponent","params","useParams","useState","loading","setLoading","postItems","setPostItems","id","parseInt","pageNumber","setPageNumber","useEffect","Api","get","then","data","window","scrollTo","className","map","post","authorURL","_embedded","author","link","replace","fimg_url","src","alt","title","rendered","dangerouslySetInnerHTML","__html","content","to","slug","date","name","pathname","onClick","console","log"],"mappings":"6FAAA,YAEMA,EAFN,OAEgBC,EAAMC,OAAO,CACzBC,QAAS,kDAIbH,EAAQI,aAAaC,QAAQC,KAAI,SAASC,GAGtC,OAAOA,KACP,SAASC,GAGT,OAAOC,QAAQC,OAAOF,MAG1BR,EAAQI,aAAaO,SAASL,KAAI,SAASK,GAGvC,OAAOA,KACT,SAASH,GAIP,OAAOC,QAAQC,OAAOF,MAIXR,O,wFCsEAY,UA/Ff,WAEI,IAAMC,EAASC,cAFO,EAIQC,qBAJR,mBAIfC,EAJe,KAINC,EAJM,OAMYF,mBAAS,IANrB,mBAMfG,EANe,KAMJC,EANI,OAQcJ,mBAChCF,EAAOO,GAAKP,EAAOO,GAAKC,SAAS,IATf,mBAQfC,EARe,KAQHC,EARG,KAoCtB,OAxBAC,qBAAU,WACNP,GAAW,GACXQ,IAAIC,IAAJ,uCAAwCJ,EAAxC,YACKK,MAAK,SAAAhB,GACFM,GAAW,GACX,IAAIW,EAAOjB,EAASiB,KACpBT,EAAaS,GACbC,OAAOC,SAAS,EAAE,QAE3B,CAACR,IAgBA,qBAAKS,UAAU,WAAf,SAEQf,EAEI,qBAAKe,UAAU,8DAAf,SACI,sBAAKA,UAAU,eAAf,UAA8B,wBAAW,wBAAW,6BAGxD,qCAEQb,EAAUc,KAAI,SAAAC,GACV,IAAIC,EAAYD,EAAKE,UAAUC,OAAO,GAAGC,KAGzC,OADAH,EAAYA,EAAUI,QAAQ,2CAA4C,IAEtE,sBAAmBP,UAAU,YAA7B,UAEQE,EAAKM,SAED,qBAAKR,UAAU,eAAeS,IAAKP,EAAKM,SAAUE,IAAI,MAEtD,GAER,sBAAKV,UAAU,YAAf,UACI,oBAAIA,UAAU,aAAd,SAA4BE,EAAKS,MAAMC,WACvC,qBAAKC,wBAAyB,CAAEC,OAAQZ,EAAKa,QAAQH,YACrD,cAAC,IAAD,CAAMI,GAAE,gBAAWd,EAAKe,MAAQjB,UAAU,kBAA1C,iCAEJ,sBAAKA,UAAU,yBAAf,uBACeE,EAAKgB,KADpB,MAEZ,eAAC,IAAD,CAAMF,GAAIb,EAAV,cAAuBD,EAAKE,UAAUC,OAAO,GAAGc,aAf9BjB,EAAKb,OAuB3B,qBAAIW,UAAU,yCAAd,UACI,oBAAIA,UAAU,YAAd,SACI,cAAC,IAAD,CAAMA,UAAU,YAAYgB,GAAI,CAAEI,SAAS,SAAD,OAAW7B,EAAa,IAAO8B,QArD3E,WACtB7B,EAAcD,EAAa,IAoDH,4BAGAA,EAAa,EACP,GACA,oBAAIS,UAAU,YAAd,SACE,cAAC,IAAD,CAAMA,UAAU,YAAYgB,GAAI,CAAEI,SAAS,SAAD,OAAW7B,EAAa,IAAO8B,QAvDnF,YACjB9B,EAAa,IACd+B,QAAQC,IAAIhC,GACZC,EAAcD,EAAa,KAoDC","file":"static/js/6.f522e63c.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst blogAPI = axios.create({\r\n    baseURL: 'https://hamyaredigi.ir/amin/index.php/wp-json',\r\n    //timeout: 5000,\r\n})\r\n\r\nblogAPI.interceptors.request.use(function(config) {\r\n    //console.log('test request');\r\n    //ghab az return mitoonid functioni ro ejra konid\r\n    return config;\r\n} , function(err) {\r\n    // handle error\r\n    //console.log('test request error');\r\n    return Promise.reject(err)\r\n})\r\n\r\nblogAPI.interceptors.response.use(function(response) {\r\n    //ghab az return mitoonid functioni ro ejra konid\r\n    //console.log('test response');\r\n    return response;\r\n},function(err) {\r\n    // System log\r\n    //console.log('test response error');\r\n\r\n    return Promise.reject(err);\r\n})\r\n\r\n\r\nexport default blogAPI;","import { useState, useEffect } from \"react\";\r\nimport Api from './../axios/axios';\r\nimport { Link, useParams } from \"react-router-dom\";\r\n\r\nfunction PostsComponent() {\r\n\r\n    const params = useParams();\r\n\r\n    const [loading, setLoading] = useState();\r\n\r\n    const [postItems, setPostItems] = useState([]);\r\n\r\n    const [pageNumber, setPageNumber] = useState(\r\n        params.id ? params.id : parseInt(1)\r\n    )\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        Api.get(`/wp/v2/posts?per_page=5&page=${pageNumber}&_embed`)\r\n            .then(response => {\r\n                setLoading(false);\r\n                let data = response.data;\r\n                setPostItems(data);\r\n                window.scrollTo(0,0);\r\n            })\r\n    }, [pageNumber]);\r\n\r\n\r\n    const newerLoadingPosts = () => {\r\n        setPageNumber(pageNumber + 1)\r\n    }\r\n\r\n    const olderLoadingPosts = () => {\r\n        if (!pageNumber < 2) {\r\n            console.log(pageNumber);\r\n            setPageNumber(pageNumber - 1)\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"col-md-8\">\r\n            {\r\n                loading\r\n                    ?\r\n                    <div className=\"d-flex min-vh-100 justify-content-center align-items-center\">\r\n                        <div className=\"lds-facebook\"><div></div><div></div><div></div></div>\r\n                    </div>\r\n                    :\r\n                    <>\r\n                        {\r\n                            postItems.map(post => {\r\n                                let authorURL = post._embedded.author[0].link;\r\n\r\n                                authorURL = authorURL.replace(\"http://127.0.0.1/wordpress/wp-json/wp/v2\", \"\")\r\n                                return (\r\n                                    <div key={post.id} className=\"card mb-4\">\r\n                                        {\r\n                                            post.fimg_url\r\n                                                ?\r\n                                                <img className=\"card-img-top\" src={post.fimg_url} alt=\"1\" />\r\n                                                :\r\n                                                ''\r\n                                        }\r\n                                        <div className=\"card-body\">\r\n                                            <h2 className=\"card-title\">{post.title.rendered}</h2>\r\n                                            <div dangerouslySetInnerHTML={{ __html: post.content.rendered }} />\r\n                                            <Link to={`/post/${post.slug}`} className=\"btn btn-primary\">Read More &rarr;</Link>\r\n                                        </div>\r\n                                        <div className=\"card-footer text-muted\">\r\n                                            Posted on {post.date} by\r\n                            <Link to={authorURL}> {post._embedded.author[0].name}</Link>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n\r\n\r\n                        <ul className=\"pagination justify-content-center mb-4\">\r\n                            <li className=\"page-item\">\r\n                                <Link className=\"page-link\" to={{ pathname: `/page/${pageNumber + 1}` }} onClick={newerLoadingPosts}>Newer &rarr;</Link>\r\n                            </li>\r\n                            {\r\n                                pageNumber < 2\r\n                                    ? ''\r\n                                    : <li className=\"page-item\">\r\n                                        <Link className=\"page-link\" to={{ pathname: `/page/${pageNumber - 1}` }} onClick={olderLoadingPosts}>&larr; Older</Link>\r\n                                    </li>\r\n                            }\r\n\r\n                        </ul>\r\n                    </>\r\n            }\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default PostsComponent;"],"sourceRoot":""}